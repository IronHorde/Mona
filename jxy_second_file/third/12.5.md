
# 测试原则

## 一、什么是单元测试

### 1.减少执行功能测试的时间

功能测试是通过打开应用并进行一系列步骤，验证预期行为
减少测试时间

### 2.防止回退

测试时不光要测试新功能，还要测试以前的功能，防止出错

### 3.可执行文件

对于每个输入，要能清楚的解释输出，还要验证该方法是否正常工作

### 4.低耦合

高耦合代码很难进行单元测试，所以要将代码进行解耦

## 二、好的单元测试的特点

### 1.快

单元测试应花费较少的时间运行

### 2.独立

单元测试可以独立运行，不依赖任何外部因素

### 3.可重复

在不改动内容的情况下，多次运行单元测试，返回结果应相同

### 4.自动检测

不需要人工交互就可以自动检测是否通过

### 5.设计时间短

与正在测试的代码相比，单元测试不应该花费不成比例的长时间来编写。

## 三、术语

### 1.stub

stub完全是外部依赖，不对计划之外的情况做反应

### 2.mock

预先计划好的对象，可以用来判断结果是否正确

## 四、规范

### 1.命名标准

测试的名称应该包括三个部分：

要测试的方法的名称。
测试的场景。
调用方案时的预期行为。

### 2.测试模式

根据需要创建和设置对象
执行操作
断言预期的结果

### 3.输入

在单元测试中使用最简单的输入
编写测试时，将重点放在行为上，设置额外的属性或不需要的值，会使测试意图变的模糊

### 4.避免特别的字符串

将特殊字符串单独定义常量

### 5.避免逻辑

逻辑可能会使测试代码中包含错误，
可以将其拆分成多个测试

### 6.通过api来进行对象的创建销毁

单独写一个api，将创建步骤和销毁步骤放在里面执行

### 7.避免多个断言

为每个断言设置一个测试
如果一个断言失败，整个测试都会失败

### 8.通过共有方法测试私有方法

私有方法一般是实现细节，不是测试应该关注的

### 9.存根静态引用

对于方法中引用的静态变量，测试代码也需要进行控制
可以将要控制的代码写入一个接口，并使开发代码依赖于这个接口，从而实现静态变量的控制